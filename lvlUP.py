#â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
#  â–ˆâ–€â€ƒâ–ˆ â–ˆâ€ƒâ–€â–„â–€â€ƒ â€ƒâ–ˆâ–€â–„â–€â–ˆâ€ƒâ–ˆâ–€â–ˆâ€ƒâ–ˆâ–€â–„â€ƒâ–ˆ â–ˆâ€ƒâ–ˆ  â€ƒâ–ˆâ–€â–€â€ƒâ–ˆâ–€ Chanel: https://t.me/shx_modules
#  â–„â–ˆâ€ƒâ–ˆâ–€â–ˆâ€ƒâ–ˆ â–ˆâ€ƒ â€ƒâ–ˆ â–€ â–ˆâ€ƒâ–ˆâ–„â–ˆâ€ƒâ–ˆâ–„â–€â€ƒâ–ˆâ–„â–ˆâ€ƒâ–ˆâ–„â–„â€ƒâ–ˆâ–ˆâ–„â€ƒâ–„â–ˆ Not Licensed
#â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
#  â–ˆâ–€â–€â€ƒâ–€â–„â–€â€ƒâ–ˆ  â€ƒâ–ˆ â–ˆâ€ƒâ–ˆâ–€â€ƒâ–ˆâ€ƒâ–ˆ â–ˆâ€ƒâ–ˆâ–€â–€â€ƒ â€ƒâ–ˆâ–€â–„â–€â–ˆâ€ƒâ–ˆâ–€â–ˆâ€ƒâ–ˆâ–€â–„â€ƒâ–ˆ â–ˆâ€ƒâ–ˆ  â€ƒâ–ˆâ–€â–€â€ƒâ–ˆâ–€
#  â–ˆâ–ˆâ–„â€ƒâ–ˆ â–ˆâ€ƒâ–ˆâ–„â–„â€ƒâ–ˆâ–„â–ˆâ€ƒâ–„â–ˆâ€ƒâ–ˆâ€ƒâ–€â–„â–€â€ƒâ–ˆâ–ˆâ–„â€ƒ â€ƒâ–ˆ â–€ â–ˆâ€ƒâ–ˆâ–„â–ˆâ€ƒâ–ˆâ–„â–€â€ƒâ–ˆâ–„â–ˆâ€ƒâ–ˆâ–„â–„â€ƒâ–ˆâ–ˆâ–„â€ƒâ–„â–ˆ
#â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
# Idea:
# meta developer: @shx_modules
# Thanks:
#â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”

from .. import utils, loader
from ..inline.types import InlineCall, InlineQuery
from telethon.tl.types import Message, ChatAdminRights
from telethon import functions
import asyncio
from asyncio import sleep

__version__ = (1, 0, 0)

@loader.tds
class lvlUP(loader.Module):
    '''ĞœĞ¾Ğ´ÑƒĞ»ÑŒ Ğ´Ğ»Ñ inline ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ñ Ñ‡ĞµĞ³Ğ¾-Ğ»Ğ¸Ğ±Ğ¾ Ğ² MineEVO\nDeveloper: @shx_modules'''
    strings = {
        'name':'lvlUP',
        'fc_integrate':'Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ»Ğ¸ Ğ² Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ FastCommands?'
    }
    tempdb = '0'

    async def client_ready(self):
        self._backup_channel, _ = await utils.asset_channel(
            self._client,
            "lvlUP - group",
            "Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ° Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ lvlUP Ğ¾Ñ‚ @Shx_modules\nĞĞµ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞ¹Ñ‚Ğµ ÑÑĞ´Ğ° Ğ´Ñ€ÑƒĞ³Ğ¸Ñ… Ğ»ÑĞ´ĞµĞ¹ Ğ¸Ğ»Ğ¸ Ğ±Ğ¾Ñ‚Ğ¾Ğ²!",
            silent=True,
            archive=True,
        )
        await self.client(functions.channels.InviteToChannelRequest(self._backup_channel, ['@mine_evo_bot']))
        await self.client(functions.channels.EditAdminRequest(
                channel=self._backup_channel,
                user_id="@mine_evo_bot",
                admin_rights=ChatAdminRights(ban_users=True, post_messages=True, edit_messages=True),
                rank="lvlUP",
            )
        )


    def __init__(self):
        self.config = loader.ModuleConfig(
            loader.ConfigValue(
                "fc_integrate", False,
                lambda: self.strings("fc_integrate"),
                validator=loader.validators.Boolean()
            ),
        )

    @loader.watcher()
    async def watcher_check(self, message):
        if message.raw_text == '/checklvlup':
            if message.from_id == 5195118663:
                await self.client.send_message(message.to_id, 'evo')

    @loader.watcher(out = True)
    async def watcher_integration(self, message):
        if message.raw_text == '.integration':
            self.config['fc_integrate'] = not self.config['fc_integrate']
            st = self.config['fc_integrate']
            if st == True:
                await utils.answer(message, '<emoji document_id=5204044038126182496>âœ…</emoji> Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ FastCommands Ğ²ĞºĞ»ÑÑ‡ĞµĞ½Ğ°.'
            elif st == False:
                await utils.answer(message, '<emoji document_id=5206595394728894920>âŒ</emoji> Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ FastCommands Ğ¾Ñ‚ĞºĞ»ÑÑ‡ĞµĞ½Ğ°.'

    @loader.command(
        ru_doc = '[ Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ğµ:str ] - Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚ÑŒ ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ğµ Ñ‡ĞµĞ³Ğ¾ Ğ»Ğ¸Ğ±Ğ¾',
        de_doc = '[ Verbesserung:str ] - Entdecke die Verbesserung von etwas'
    )
    async def up(self, message):
        '''[ Improvement:str ] - open an improvement of something'''
        args = utils.get_args_raw(message)
        self.tempdb = args
        prefix = utils.escape_html(self.get_prefix())
        st = self.config['fc_integrate']
        uplist = ['Ğ£Ñ€', 'ÑƒÑ€', 'ĞœÑ‰', 'Ğ¼Ñ‰', 'Ğ£Ğ´', 'ÑƒĞ´', 'Ğ£Ñ€Ğ¾Ğ½', 'ÑƒÑ€Ğ¾Ğ½', 'ĞšÑ€Ğ¸Ñ‚', 'ĞºÑ€Ğ¸Ñ‚', 'Ğ¨Ğ¿', 'ÑˆĞ¿', 'Ğ£Ğ¿', 'ÑƒĞ¿', 'Ğ¨Ğº', 'ÑˆĞº', 'ĞœÑ€', 'Ğ¼Ñ€', 'ĞœĞ¿', 'Ğ¼Ğ¿', 'ĞœÑ', 'Ğ¼Ñ', 'ĞœÑƒ', 'Ğ¼Ñƒ', 'Ğ—Ñ', 'Ğ·Ñ']
        fcuplist = ['%Ğ¼Ğ±','%Ğ±Ğ±','%Ğ½Ñ','%Ğ²Ğ¼','%Ğ¼Ñ',]
        if args in uplist:
            await utils.answer(message, '<emoji document_id=5204044038126182496>âœ…</emoji> Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ÑÑ...')
            async with self.client.conversation(self._backup_channel) as conv:
                await conv.send_message(f'{args}')
                res = await conv.get_response()
                await self.inline.form(
                    text = res.text,
                    message=message,
                    reply_markup=[
                        [
                            {
                                "text": "ğŸ†™ ĞŸĞ¾Ğ²Ñ‹ÑĞ¸Ñ‚ÑŒ!",
                                "callback": self.lvlup,
                            }
                        ],
                    ]
                )
        elif args in fcuplist:
            if st == True:
                fc = {
                    '%Ğ¼Ğ±':'ğŸ’¥ ĞœĞ¾Ñ‰ÑŒ Ğ±ÑƒÑ€Ğ°',
                    '%Ğ±Ğ±':"ğŸ›¢ Ğ‘Ğ°Ğº Ğ±ÑƒÑ€Ğ°",
                    '%Ğ½Ñ':"ğŸ—¼ ĞĞ°ÑĞ¾ÑÑ‹",
                    '%Ğ²Ğ¼':"ğŸš› Ğ’Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ",
                    '%Ğ¼Ñ':"ğŸœ ĞœĞµÑÑ‚Ğ¾Ñ€Ğ¾Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ"
                }
                for key, value in fc.items():
                    if args == key:
                        args = value
                        self.tempdb = args
                        async with self.client.conversation(self._backup_channel) as conv:
                            await conv.send_message(f'{args}')
                            res = await conv.get_response()
                            await self.inline.form(
                                text = res.text,
                                message=message,
                                reply_markup=[
                                    [
                                        {
                                            "text": "ğŸ†™ ĞŸĞ¾Ğ²Ñ‹ÑĞ¸Ñ‚ÑŒ!",
                                            "callback": self.lvlup,
                                        }
                                    ],
                                ]
                            )
                        break
            else:
                await utils.answer(message, f'<emoji document_id=5877477244938489129>ğŸš«</emoji> <b>Error |</b> <code>{prefix}up</code>\nĞ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ FastCommands Ğ¾Ñ‚ĞºĞ»ÑÑ‡ĞµĞ½Ğ°. Ğ§Ñ‚Ğ¾Ğ±Ñ‹ Ğ²ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ <code>.integration</code>')
        elif not args:
            await utils.answer(message, f'<emoji document_id=5877477244938489129>ğŸš«</emoji> <b>Error |</b> <code>{prefix}up</code>\nĞ’Ñ‹ Ğ½Ğµ Ğ²Ğ²ĞµĞ»Ğ¸, Ñ‡Ñ‚Ğ¾ Ñ…Ğ¾Ñ‚Ğ¸Ñ‚Ğµ ÑƒĞ»ÑƒÑ‡ÑˆĞ¸Ñ‚ÑŒ\nĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ <code>{prefix}up ÑƒÑ€</code>')
        else:
            await utils.answer(message, f'<emoji document_id=5877477244938489129>ğŸš«</emoji> <b>Error |</b> <code>{prefix}up</code>\nĞ£Ğ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ğµ <code>{args}</code> Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾')
            
                


    async def lvlup(self, call: InlineCall):
        args = self.tempdb
        async with self.client.conversation(self._backup_channel) as conv:
            await conv.send_message(f'{args}')
            res = await conv.get_response()
            await res.click(0)
            await asyncio.sleep(0.5)
        async with self.client.conversation(self._backup_channel) as conv:
            await conv.send_message(f'{args}')
            res = await conv.get_response()
        txt = res.text
        await call.edit(
            text=txt,
            reply_markup=[
                    [
                        {
                            "text": "ğŸ†™ ĞŸĞ¾Ğ²Ñ‹ÑĞ¸Ñ‚ÑŒ!",
                            "callback": self.lvlup,
                        }
                    ],
            ]
        )

    @loader.command(
        ru_doc = '- ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ñ… ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´ Ğ´Ğ»Ñ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸',
        de_doc = '- liste der Schnellbefehle fÃ¼r die Integration'
    )
    async def fch(self, message):
        ''' - list of quick commands for integration'''
        st = self.config['fc_integrate']
        prefix = utils.escape_html(self.get_prefix())
        if st == True: 
            await utils.answer(message, f'<emoji document_id=5773781976905421370>ğŸ’¼</emoji> <b>Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ñ… ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´:</b> \n<code>{prefix}up %Ğ¼Ğ±</code> - ğŸ’¥ ĞœĞ¾Ñ‰ÑŒ Ğ±ÑƒÑ€Ğ°\n<code>{prefix}up %Ğ±Ğ±</code> - ğŸ›¢ Ğ‘Ğ°Ğº Ğ±ÑƒÑ€Ğ°\n<code>{prefix}up %Ğ½Ñ</code> - ğŸ—¼ ĞĞ°ÑĞ¾ÑÑ‹\n<code>{prefix}up %Ğ²Ğ¼</code> - ğŸš› Ğ’Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ\n<code>{prefix}up %Ğ¼Ñ</code> - ğŸœ ĞœĞµÑÑ‚Ğ¾Ñ€Ğ¾Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ')
        else:
             await utils.answer(message, f'<emoji document_id=5877477244938489129>ğŸš«</emoji> <b>Error |</b> <code>{prefix}up</code>\nĞ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ FastCommands Ğ¾Ñ‚ĞºĞ»ÑÑ‡ĞµĞ½Ğ°. Ğ§Ñ‚Ğ¾Ğ±Ñ‹ Ğ²ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ <code>.integration</code>')
