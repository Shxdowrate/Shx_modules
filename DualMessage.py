#â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
#  â–ˆâ–€â€ƒâ–ˆ â–ˆâ€ƒâ–€â–„â–€â€ƒ â€ƒâ–ˆâ–€â–„â–€â–ˆâ€ƒâ–ˆâ–€â–ˆâ€ƒâ–ˆâ–€â–„â€ƒâ–ˆ â–ˆâ€ƒâ–ˆ  â€ƒâ–ˆâ–€â–€â€ƒâ–ˆâ–€ Chanel: https://t.me/mescr_m
#  â–„â–ˆâ€ƒâ–ˆâ–€â–ˆâ€ƒâ–ˆ â–ˆâ€ƒ â€ƒâ–ˆ â–€ â–ˆâ€ƒâ–ˆâ–„â–ˆâ€ƒâ–ˆâ–„â–€â€ƒâ–ˆâ–„â–ˆâ€ƒâ–ˆâ–„â–„â€ƒâ–ˆâ–ˆâ–„â€ƒâ–„â–ˆ Not Licensed
#â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
#  â–ˆâ–€â–€â€ƒâ–€â–„â–€â€ƒâ–ˆ  â€ƒâ–ˆ â–ˆâ€ƒâ–ˆâ–€â€ƒâ–ˆâ€ƒâ–ˆ â–ˆâ€ƒâ–ˆâ–€â–€â€ƒ â€ƒâ–ˆâ–€â–„â–€â–ˆâ€ƒâ–ˆâ–€â–ˆâ€ƒâ–ˆâ–€â–„â€ƒâ–ˆ â–ˆâ€ƒâ–ˆ  â€ƒâ–ˆâ–€â–€â€ƒâ–ˆâ–€
#  â–ˆâ–ˆâ–„â€ƒâ–ˆ â–ˆâ€ƒâ–ˆâ–„â–„â€ƒâ–ˆâ–„â–ˆâ€ƒâ–„â–ˆâ€ƒâ–ˆâ€ƒâ–€â–„â–€â€ƒâ–ˆâ–ˆâ–„â€ƒ â€ƒâ–ˆ â–€ â–ˆâ€ƒâ–ˆâ–„â–ˆâ€ƒâ–ˆâ–„â–€â€ƒâ–ˆâ–„â–ˆâ€ƒâ–ˆâ–„â–„â€ƒâ–ˆâ–ˆâ–„â€ƒâ–„â–ˆ
#â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
# Idea: 
# meta developer: @mescr_m
# Thanks: 
#â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”

from .. import utils, loader
from ..inline.types import InlineCall

__version__ = (1, 0, 0)

class DualMessage(loader.Module):
    '''ĞœĞ¾Ğ´ÑƒĞ»ÑŒ Ğ´Ğ»Ñ Ğ´ÑƒĞ±Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ²Ğ°ÑˆĞ¸Ñ… ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹\nDeveloper: @mescr_m'''

    strings = {
        'name': 'DualMessage'
    }

    @loader.watcher(no_commands = True, no_media = True, no_inline = True, out = True)
    async def watcher(self, message):
        if message:
            status = self.get('m_status')
            if status == True:
                reply = await message.get_reply_message()
                if reply != None:
                    ds = self.get('d_status')
                    await reply.reply(message.text)
                    if ds == True:
                        await message.delete()
                        return
                else:
                    ds = self.get('d_status')
                    await self.client.send_message(message.chat_id, message.text)
                    if ds == True:
                        await message.delete()

    async def client_ready(self):
        a = self.get('m_status')
        if a == None:
            self.set('m_status', False)
        a = self.get('d_status')
        if a == None:
            self.set('d_status', False)
        a = 1
        


    @loader.command()
    async def dualmsettings(self, message):
        '''- Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ'''
        status = self.get('m_status')
        ds = self.get('d_status')
        if status == True:
            statustxt = 'Ğ²ĞºĞ»ÑÑ‡ĞµĞ½'
            statusbutton = 'âš¡ ĞÑ‚ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ'
        else:
            statustxt = 'Ğ¾Ñ‚ĞºĞ»ÑÑ‡ĞµĞ½'
            statusbutton = 'âš¡ Ğ’ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ'
        if ds == True:
            dstxt = 'Ğ²ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾'
            dsbutton = 'ğŸ—‘ï¸ ĞÑ‚ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ'
        else:
            dstxt = 'Ğ¾Ñ‚ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾'
            dsbutton = 'ğŸ—‘ï¸ Ğ’ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ'
        await self.inline.form(
            text = f'ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ <b>DualMessage</b>\n\n<b>âš¡ Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:</b> {statustxt}\nğŸ—‘ï¸ <b>Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ: </b>{dstxt}',
            message=message,
            reply_markup=[
                [
                    {
                        "text": statusbutton,
                        "callback": self.status,
                    },
                ],
                [
                    
                    {
                        "text": dsbutton,
                        "callback": self.delete_message,
                    },
                ],
            ],
        )


    async def status(self, call: InlineCall):
        status = self.get('m_status')
        ds = self.get('d_status')
        if status == False:
            self.set('m_status', True)
        else:
            self.set('m_status', False)
        status = self.get('m_status')
        ds = self.get('d_status')
        if status == True:
            statustxt = 'Ğ²ĞºĞ»ÑÑ‡ĞµĞ½'
            statusbutton = 'âš¡ ĞÑ‚ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ'
        else:
            statustxt = 'Ğ¾Ñ‚ĞºĞ»ÑÑ‡ĞµĞ½'
            statusbutton = 'âš¡ Ğ’ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ'
        if ds == True:
            dstxt = 'Ğ²ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾'
            dsbutton = 'ğŸ—‘ï¸ ĞÑ‚ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ'
        else:
            dstxt = 'Ğ¾Ñ‚ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾'
            dsbutton = 'ğŸ—‘ï¸ Ğ’ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ'
        await call.edit(
            text=f'ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ <b>DualMessage</b>\n\n<b>âš¡ Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:</b> {statustxt}\nğŸ—‘ï¸ <b>Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ: </b>{dstxt}',
            reply_markup=[
                [
                    {
                        "text": statusbutton,
                        "callback": self.status,
                    },
                ],
                [
                    
                    {
                        "text": dsbutton,
                        "callback": self.delete_message,
                    },
                ],
            ],
        )

    async def delete_message(self, call: InlineCall):
        status = self.get('m_status')
        ds = self.get('d_status')
        if ds == False:
            self.set('d_status', True)
        else:
            self.set('d_status', False)
        status = self.get('m_status')
        ds = self.get('d_status')
        if status == True:
            statustxt = 'Ğ²ĞºĞ»ÑÑ‡ĞµĞ½'
            statusbutton = 'âš¡ ĞÑ‚ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ'
        else:
            statustxt = 'Ğ¾Ñ‚ĞºĞ»ÑÑ‡ĞµĞ½'
            statusbutton = 'âš¡ Ğ’ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ'
        if ds == True:
            dstxt = 'Ğ²ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾'
            dsbutton = 'ğŸ—‘ï¸ ĞÑ‚ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ'
        else:
            dstxt = 'Ğ¾Ñ‚ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾'
            dsbutton = 'ğŸ—‘ï¸ Ğ’ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ'
        await call.edit(
            text=f'ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ <b>DualMessage</b>\n\n<b>âš¡ Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:</b> {statustxt}\nğŸ—‘ï¸ <b>Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ: </b>{dstxt}',
            reply_markup=[
                [
                    {
                        "text": statusbutton,
                        "callback": self.status,
                    },
                ],
                [
                    
                    {
                        "text": dsbutton,
                        "callback": self.delete_message,
                    },
                ],
            ],
        )
